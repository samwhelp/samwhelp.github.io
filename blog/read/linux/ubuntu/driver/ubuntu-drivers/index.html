<!DOCTYPE html>
<html lang="zh-Hant-TW">

	

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title> Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」 | 鵝從未在裡面 </title>
	<meta property="og:title" content=" Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」 | 鵝從未在裡面 " />
	<meta name="twitter:title" content=" Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」 | 鵝從未在裡面 ">

	<meta property="og:type" content="article">
	<meta name="twitter:card" content="summary">

	<meta name="description" content=" Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」 ">
	<meta property="og:description" content=" Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」 " />
	<meta name="twitter:description" content=" Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」 " />

	<link rel="icon" type="image/x-icon" href="http://samwhelp.github.io/blog/asset/img/favicon.png">

	<link rel="image_src" href="http://samwhelp.github.io/blog/asset/img/logo.png" >
	<meta property="og:image" content="http://samwhelp.github.io/blog/asset/img/logo.png" />

	
	<link href="http://samwhelp.github.io/blog/atom.xml" title="鵝從未在裡面" type="application/atom+xml" rel="alternative">
	

	<link rel="canonical" href="/blog/read/linux/ubuntu/driver/ubuntu-drivers/index.html">

	<link rel="stylesheet" href="/blog/asset/css/main.css">

</head>


<body>

	
	<header class="site-header">

		
		<nav class="nav-page">

			<div class="row">

				<ul>

					

					<li><a href="/blog/">Home</a></li>

					

					<li><a href="/blog/find/archive/">Sitemap</a></li>

					

					<li><a href="/blog/find/tag/index/">Index</a></li>

					

					<li><a href="/book/">Book</a></li>

					

				</ul>

			</div>

		</nav>


		<div class="site-header-main">

			<div class="row">

				<h1><a href="/blog/">鵝從未在裡面</a></h1>

				

					<p>Everything will be all right in the end.</p>

				

			</div>

		</div>

		


		<nav class="nav-cat">

			<div class="row">

				<ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/lang/">lang</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/lang/perl/">perl</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/lang/php/">php</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/lang/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/lang/ruby/">ruby</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/debian/">debian</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/debian/driver/">driver</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/fedora/">fedora</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/lxqt/">lxqt</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/mint/">mint</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/mint/cinnamon/">cinnamon</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/mint/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/mint/sound/">sound</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/protocol/">protocol</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/protocol/mtp/">mtp</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/reference/">reference</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/remote/">remote</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/">ubuntu</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/account/">account</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/disk/">disk</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/driver/">driver</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/editor/">editor</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/font/">font</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/info/">info</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/manual/">manual</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/package/">package</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/process/">process</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/shell/">shell</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/tiling/">tiling</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/linux/ubuntu/workspace/">workspace</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/music/">music</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/platform/">platform</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/platform/gitbook/">gitbook</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/platform/gjs/">gjs</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/platform/nodejs/">nodejs</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/site/">site</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/site/update/">update</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/tool/">tool</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/tool/browser/">browser</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/tool/ebook/">ebook</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/tool/ebook/calibre/">calibre</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/tool/editor/">editor</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/find/category/tool/management/">management</a></li></ul></li></ul>

			</div>

		</nav>




	</header>


	<div id="content" class="site-content">

		
		<div class="row content-post">
			<article itemscope itemtype="http://schema.org/Article">

				

				

				<p class="content-meta">
					<span class="meta-date" itemprop="datePublished" content="2015-02-02">2015-02-02</span>

					
					  <span class="meta-cat">
						<a class="category-link" href="/blog/find/category/linux/">linux</a>, <a class="category-link" href="/blog/find/category/linux/ubuntu/">ubuntu</a>, <a class="category-link" href="/blog/find/category/linux/ubuntu/driver/">driver</a>
					  </span>
					
				</p>

				

					<h2 class="content-title">
						<a href="/blog/read/linux/ubuntu/driver/ubuntu-drivers/" itemprop="url"><span itemprop="name">Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」</span></a>
					</h2>

				


				<div class="content" itemprop="articleBody">
					<h1 id="Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」">Ubuntu環境下，如何使用下指令的方式查詢「額外驅動程式」</h1><h2 id="測試環境">測試環境</h2><p>以下測試是在「Xubuntu 14.04 64位元」。</p>
<h2 id="緣起">緣起</h2><p>在「<a href="http://www.ubuntu-tw.org/modules/newbb/viewtopic.php?post_id=326240#forumpost326240" target="_blank" rel="external">回答別人問題</a>」的時候，在「<a href="https://help.ubuntu.com/community/BinaryDriverHowto/Nvidia#Installation_without_X_.2BAC8_from_the_console" target="_blank" rel="external">這一頁</a>」<br>看到一個指令「ubuntu-drivers」，是屬於「<a href="http://packages.ubuntu.com/trusty/ubuntu-drivers-common" target="_blank" rel="external">ubuntu-drivers-common</a>」這個套件。</p>
<h2 id="用法">用法</h2><p>顯示說明</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ubuntu-drivers -h</span><br></pre></td></tr></table></figure>
<p>顯示</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">usage</span>: <span class="string">ubuntu-drivers [-h] [--package-list PATH] &lt;command&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="vim">List/install driver packages <span class="keyword">for</span> Ubuntu.</span><br><span class="line"></span><br><span class="line">positional <span class="keyword">argument</span><span class="variable">s:</span></span><br><span class="line">  &lt;<span class="keyword">command</span>&gt;            See below</span><br><span class="line"></span><br><span class="line">optional <span class="keyword">argument</span><span class="variable">s:</span></span><br><span class="line">  -<span class="keyword">h</span>, --<span class="keyword">help</span>           show this <span class="keyword">help</span> message <span class="built_in">and</span> <span class="keyword">exit</span></span><br><span class="line">  --package-<span class="keyword">list</span> PATH  Create <span class="keyword">file</span> with <span class="keyword">list</span> of installed packages (in</span><br><span class="line">                       autoinstall <span class="built_in">mode</span>)</span><br><span class="line"></span><br><span class="line">Available <span class="keyword">command</span><span class="variable">s:</span></span><br><span class="line">   autoinstal<span class="variable">l:</span> Install drivers that are appropriate <span class="keyword">for</span> automatic installation.</span><br><span class="line">   debu<span class="variable">g:</span> <span class="keyword">Print</span> <span class="keyword">all</span> available information <span class="built_in">and</span> <span class="keyword">debug</span> data about drivers.</span><br><span class="line">   lis<span class="variable">t:</span> Show <span class="keyword">all</span> driver packages which apply <span class="keyword">to</span> the current <span class="built_in">system</span>.</span><br><span class="line">   device<span class="variable">s:</span> Show <span class="keyword">all</span> devices which need drivers, <span class="built_in">and</span> which packages apply <span class="keyword">to</span> them.</span></span><br></pre></td></tr></table></figure>
<h2 id="以「裝在Virtualbox的系統」為例">以「裝在Virtualbox的系統」為例</h2><p>執行</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>sudo ubuntu-drivers devices</span><br></pre></td></tr></table></figure>
<p>會顯示</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">== /sys/devices/pci0000:00/0000:00:04.0 ==</span></span><br><span class="line">modalias : pci:v000080EEd0000CAFEsv00000000sd00000000bc08sc80i00</span><br><span class="line">vendor   : InnoTek Systemberatung GmbH</span><br><span class="line">model    : VirtualBox Guest Service</span><br><span class="line">driver   : virtualbox-guest-dkms - distro non-free</span><br></pre></td></tr></table></figure>
<p>執行</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ubuntu-drivers <span class="type">list</span></span><br></pre></td></tr></table></figure>
<p>會顯示</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualbox-guest-dkms</span><br></pre></td></tr></table></figure>
<p>也就是說你可以執行下面的指令，來安裝套件「<a href="http://packages.ubuntu.com/trusty/virtualbox-guest-dkms" target="_blank" rel="external">virtualbox-guest-dkms</a>」。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-<span class="keyword">get</span> install virtualbox-guest-dkms</span><br></pre></td></tr></table></figure>
<p>執行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ubuntu-drivers debug</span><br></pre></td></tr></table></figure>
<p>會顯示</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">=== log messages from detection ===</span></span><br><span class="line"></span><br><span class="line">...略...</span><br><span class="line"></span><br><span class="line"><span class="header">=== modaliases in the system ===</span></span><br><span class="line"></span><br><span class="line">...略...</span><br><span class="line"></span><br><span class="line"><span class="header">=== matching driver packages ===</span></span><br><span class="line">virtualbox-guest-dkms: installed: 4.3.18-dfsg-1   available: 4.3.18-dfsg-1 (auto-install)  [distro]  non-free  modalias: pci:v000080EEd0000CAFEsv00000000sd00000000bc08sc80i00  path: /sys/devices/pci0000:00/0000:00:04.0  vendor: InnoTek Systemberatung GmbH  model: VirtualBox Guest Service</span><br></pre></td></tr></table></figure>
<h2 id="以「我的系統」為例">以「我的系統」為例</h2><p>執行</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>sudo ubuntu-drivers devices</span><br></pre></td></tr></table></figure>
<p>會顯示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">== /sys/devices/pci0000:<span class="number">00</span>/<span class="number">0000</span>:<span class="number">00</span>:<span class="number">01.0</span>/<span class="number">0000</span>:<span class="number">01</span>:<span class="number">00.0</span> ==</span><br><span class="line">modalias : pci:v000010DEd00000421sv00001458sd0000344Abc03sc00i00</span><br><span class="line">vendor   : NVIDIA Corporation</span><br><span class="line">model    : ...略...</span><br><span class="line">driver   : nvidia-<span class="number">331</span> - distro non-<span class="built_in">free</span> recommended</span><br><span class="line">driver   : nvidia-<span class="number">304</span> - distro non-<span class="built_in">free</span></span><br><span class="line">driver   : xserver-xorg-video-nouveau - distro <span class="built_in">free</span> builtin</span><br><span class="line">driver   : nvidia-<span class="number">331</span>-updates - distro non-<span class="built_in">free</span></span><br><span class="line">driver   : nvidia-<span class="number">304</span>-updates - distro non-<span class="built_in">free</span></span><br></pre></td></tr></table></figure>
<p>執行</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ubuntu-drivers <span class="type">list</span></span><br></pre></td></tr></table></figure>
<p>會顯示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvidia-<span class="number">304</span>-updates</span><br><span class="line">nvidia-<span class="number">331</span></span><br><span class="line">nvidia-<span class="number">331</span>-updates</span><br><span class="line">nvidia-<span class="number">304</span></span><br></pre></td></tr></table></figure>
<p>也就是說你可以執行下面的指令，來安裝套件「<a href="http://packages.ubuntu.com/trusty/nvidia-331-updates" target="_blank" rel="external">nvidia-331-updates
</a>」。</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-<span class="keyword">get</span> install nvidia-<span class="number">331</span>-updates</span><br></pre></td></tr></table></figure>
<p>執行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ubuntu-drivers debug</span><br></pre></td></tr></table></figure>
<p>會顯示</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">=== log messages from detection ===</span></span><br><span class="line"></span><br><span class="line">...略...</span><br><span class="line"></span><br><span class="line"><span class="header">=== modaliases in the system ===</span></span><br><span class="line"></span><br><span class="line">...略...</span><br><span class="line"></span><br><span class="line"><span class="header">=== matching driver packages ===</span></span><br><span class="line">...略...</span><br></pre></td></tr></table></figure>
<h2 id="探索套件">探索套件</h2><p>查詢「ubuntu-drivers」是屬於哪個套件</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>dpkg -<span class="constant">S</span> ubuntu-drivers</span><br></pre></td></tr></table></figure>
<p>查詢</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-<span class="operator"><span class="keyword">cache</span> <span class="keyword">show</span> ubuntu-drivers-common</span></span><br></pre></td></tr></table></figure>
<p>顯示</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Package: ubuntu-drivers-common</span><br><span class="line">Priority: optional</span><br><span class="line">Section: admin</span><br><span class="line">Installed-Size: <span class="number">279</span></span><br><span class="line">Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;</span><br><span class="line">Architecture: amd64</span><br><span class="line">Version: <span class="number">1</span>:<span class="number">0.2</span><span class="number">.91</span><span class="number">.7</span></span><br><span class="line">Replaces: jockey-common, jockey-gtk, jockey-kde, nvidia-common (&lt;&lt; <span class="number">1</span>:<span class="number">0.2</span><span class="number">.46</span>)</span><br><span class="line">Provides: jockey-common, jockey-gtk, jockey-kde, nvidia-common</span><br><span class="line">Depends: python3:any (&gt;= <span class="number">3.3</span><span class="number">.2</span>-<span class="number">2</span>~), python3, debconf (&gt;= <span class="number">0.5</span><span class="number">.00</span>) | debconf-<span class="number">2.0</span>, libc6 (&gt;= <span class="number">2.4</span>), libdrm2 (&gt;= <span class="number">2.4</span><span class="number">.3</span>), libpciaccess0 (&gt;= <span class="number">0.10</span><span class="number">.7</span>), pciutils, python3-apt, python3-xkit, udev (&gt;= <span class="number">204</span>-<span class="number">0</span>ubuntu4~), usbutils, alsa-utils, kmod | <span class="keyword">module</span>-init-tools</span><br><span class="line">Pre-Depends: dpkg (&gt;= <span class="number">1.15</span><span class="number">.7</span><span class="number">.2</span>)</span><br><span class="line">Suggests: python3-aptdaemon.pkcompat</span><br><span class="line">Conflicts: jockey-common, jockey-gtk, jockey-kde, nvidia-common (&lt;&lt; <span class="number">1</span>:<span class="number">0.2</span><span class="number">.46</span>)</span><br><span class="line">Breaks: nvidia-prime (&lt;&lt; <span class="number">0.6</span>)</span><br><span class="line">Filename: pool/main/u/ubuntu-drivers-common/ubuntu-drivers-common_0<span class="number">.2</span><span class="number">.91</span><span class="number">.7</span>_amd64.deb</span><br><span class="line">Size: <span class="number">45418</span></span><br><span class="line">MD5sum: <span class="number">98</span>a4b560f7fbcee58c57a23cbc649577</span><br><span class="line">SHA1: <span class="number">10</span>bba00ac17bfe5b19450fe532ce982f7b703146</span><br><span class="line">SHA256: f0f20ebfb6a25052cb7095ea478f8d73d1ea921038f95ec24673c2ba1d5c0d1a</span><br><span class="line">Description-en: Detect <span class="keyword">and</span> install additional Ubuntu driver packages</span><br><span class="line"> This package aggregates <span class="keyword">and</span> abstracts Ubuntu specific logic <span class="keyword">and</span> knowledge</span><br><span class="line"> about third-party driver packages. It provides:</span><br><span class="line"> .</span><br><span class="line">  - a Python API <span class="keyword">for</span> detecting driver packages <span class="keyword">for</span> a particular piece <span class="keyword">of</span></span><br><span class="line">    hardware <span class="keyword">or</span> the whole system.</span><br><span class="line"> .</span><br><span class="line">  - an <span class="string">"ubuntu-drivers"</span> command line tool <span class="keyword">to</span> list <span class="keyword">or</span> install driver packages</span><br><span class="line">    (mostly <span class="keyword">for</span> integration <span class="keyword">in</span> installers).</span><br><span class="line"> .</span><br><span class="line">  - a PackageKit plugin <span class="keyword">for</span> WhatProvides() <span class="keyword">for</span> types MODALIAS <span class="keyword">and</span></span><br><span class="line">    HARDWARE_DRIVER, <span class="keyword">to</span> <span class="keyword">do</span> the same queries <span class="keyword">as</span> above through the PackageKit API</span><br><span class="line">    (<span class="keyword">for</span> using <span class="keyword">in</span> non-distro specific GUIs). This works <span class="keyword">with</span> aptdaemon's</span><br><span class="line">    PackageKit compatibility layer (python3-aptdaemon.pkcompat) <span class="keyword">and</span> <span class="keyword">with</span></span><br><span class="line">    PackageKit's apt backend, but _not_ <span class="keyword">with</span> the PackageKit aptcc backend.</span><br><span class="line"> .</span><br><span class="line">  - some NVidia specific support code <span class="keyword">to</span> find the most appropriate driver</span><br><span class="line">    version, <span class="keyword">as</span> well <span class="keyword">as</span> setting up the alternatives symlinks that the</span><br><span class="line">    proprietary NVidia <span class="keyword">and</span> FGLRX packages <span class="keyword">use</span>.</span><br><span class="line">Description-md5: de3e80d0ec34be991721f7a39da892ac</span><br><span class="line">Enhances: packagekit-system-<span class="keyword">interface</span></span><br><span class="line">Bugs: https:<span class="comment">//bugs.launchpad.net/ubuntu/+filebug</span></span><br><span class="line">Origin: Ubuntu</span><br><span class="line">Supported: <span class="number">5</span>y</span><br><span class="line">Task: ubuntu-desktop, ubuntu-usb, kubuntu-desktop, kubuntu-active, kubuntu-active-desktop, kubuntu-active, edubuntu-desktop, edubuntu-usb, xubuntu-desktop, mythbuntu-frontend, mythbuntu-desktop, mythbuntu-backend-slave, mythbuntu-backend-master, mythbuntu-backend-master, lubuntu-core, ubuntustudio-desktop, ubuntu-gnome-desktop</span><br></pre></td></tr></table></figure>
<p>建立工作環境</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> ~/Downloads/ubuntu-drivers-common</span><br><span class="line"><span class="keyword">cd</span> ~/Downloads/ubuntu-drivers-common</span><br><span class="line"><span class="built_in">mkdir</span> download <span class="keyword">source</span></span><br></pre></td></tr></table></figure>
<h2 id="探索「Source_Package」-「ubuntu-drivers-common」">探索「Source Package」-「ubuntu-drivers-common」</h2><p>下載原始碼套件「<a href="http://packages.ubuntu.com/source/trusty/ubuntu-drivers-common" target="_blank" rel="external">ubuntu-drivers-common</a>」，並解開</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~/Downloads/ubuntu-drivers-common/<span class="keyword">source</span></span><br><span class="line">apt-<span class="built_in">get</span> <span class="keyword">source</span> ubuntu-drivers-common</span><br></pre></td></tr></table></figure>
<p>觀看有哪些檔案</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree ubuntu-drivers-common-<span class="number">0.2</span><span class="number">.91</span><span class="number">.7</span></span><br></pre></td></tr></table></figure>
<p>顯示</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">ubuntu-drivers-common-<span class="number">0.2</span>.<span class="number">91.7</span></span><br><span class="line">├── Changes<span class="class">.txt</span></span><br><span class="line">├── COPYING</span><br><span class="line">├── debhelper</span><br><span class="line">│   ├── dh_modaliases</span><br><span class="line">│   ├── modaliases<span class="class">.pm</span></span><br><span class="line">│   └── test_dh_modaliases</span><br><span class="line">├── debian</span><br><span class="line">│   ├── changelog</span><br><span class="line">│   ├── compat</span><br><span class="line">│   ├── control</span><br><span class="line">│   ├── copyright</span><br><span class="line">│   ├── dh-modaliases<span class="class">.install</span></span><br><span class="line">│   ├── po</span><br><span class="line">│   │   ├── POTFILES<span class="class">.in</span></span><br><span class="line">│   │   └── templates<span class="class">.pot</span></span><br><span class="line">│   ├── rules</span><br><span class="line">│   ├── source</span><br><span class="line">│   │   └── format</span><br><span class="line">│   ├── tests</span><br><span class="line">│   │   ├── control</span><br><span class="line">│   │   └── system</span><br><span class="line">│   ├── ubuntu-drivers-common<span class="class">.apport</span></span><br><span class="line">│   ├── ubuntu-drivers-common<span class="class">.config</span></span><br><span class="line">│   ├── ubuntu-drivers-common<span class="class">.install</span></span><br><span class="line">│   └── ubuntu-drivers-common<span class="class">.templates</span></span><br><span class="line">├── detect-plugins</span><br><span class="line">│   ├── arm-gles<span class="class">.py</span></span><br><span class="line">│   ├── open-vm-dkms<span class="class">.py</span></span><br><span class="line">│   └── sl-modem<span class="class">.py</span></span><br><span class="line">├── nvidia-common</span><br><span class="line">├── nvidia-detector</span><br><span class="line">├── NvidiaDetector</span><br><span class="line">│   ├── alternatives<span class="class">.py</span></span><br><span class="line">│   ├── __init__<span class="class">.py</span></span><br><span class="line">│   └── nvidiadetector<span class="class">.py</span></span><br><span class="line">├── nvidia-installer-hooks</span><br><span class="line">│   └── pre-install</span><br><span class="line">├── PKG-INFO</span><br><span class="line">├── quirks</span><br><span class="line">│   ├── dell_latitude</span><br><span class="line">│   ├── lenovo_thinkpad</span><br><span class="line">│   └── put_your_quirks_here</span><br><span class="line">├── Quirks</span><br><span class="line">│   ├── __init__<span class="class">.py</span></span><br><span class="line">│   ├── __init__<span class="class">.pyc</span></span><br><span class="line">│   ├── quirkapplier<span class="class">.py</span></span><br><span class="line">│   ├── quirkapplier<span class="class">.pyc</span></span><br><span class="line">│   ├── quirkinfo<span class="class">.py</span></span><br><span class="line">│   ├── quirkinfo<span class="class">.pyc</span></span><br><span class="line">│   ├── quirkreader<span class="class">.py</span></span><br><span class="line">│   └── quirkreader<span class="class">.pyc</span></span><br><span class="line">├── quirks-handler</span><br><span class="line">├── README</span><br><span class="line">├── setup<span class="class">.py</span></span><br><span class="line">├── share</span><br><span class="line">│   ├── fake-devices-wrapper</span><br><span class="line">│   ├── hybrid</span><br><span class="line">│   │   ├── gpu-manager<span class="class">.c</span></span><br><span class="line">│   │   ├── gpu-manager<span class="class">.conf</span></span><br><span class="line">│   │   └── Makefile</span><br><span class="line">│   └── obsolete</span><br><span class="line">├── tests</span><br><span class="line">│   ├── <span class="number">0</span>-test<span class="class">.py</span></span><br><span class="line">│   ├── <span class="number">0</span>-test<span class="class">.pyc</span></span><br><span class="line">│   ├── fakesysfs<span class="class">.pyc</span></span><br><span class="line">│   ├── gpu-manager<span class="class">.py</span></span><br><span class="line">│   ├── __init__<span class="class">.py</span></span><br><span class="line">│   ├── quirkreader-test<span class="class">.py</span></span><br><span class="line">│   ├── quirkreader-test<span class="class">.pyc</span></span><br><span class="line">│   ├── run</span><br><span class="line">│   ├── settings<span class="class">.py</span></span><br><span class="line">│   ├── settings<span class="class">.pyc</span></span><br><span class="line">│   ├── testarchive<span class="class">.py</span></span><br><span class="line">│   ├── testarchive<span class="class">.pyc</span></span><br><span class="line">│   ├── ubuntu_drivers<span class="class">.py</span></span><br><span class="line">│   ├── ubuntu_drivers<span class="class">.pyc</span></span><br><span class="line">│   └── xorg<span class="class">.conf</span></span><br><span class="line">├── ubiquity</span><br><span class="line">│   └── target-config</span><br><span class="line">│       └── <span class="number">31</span>ubuntu_driver_packages</span><br><span class="line">├── ubuntu-drivers</span><br><span class="line">└── UbuntuDrivers</span><br><span class="line">    ├── detect<span class="class">.py</span></span><br><span class="line">    ├── __init__<span class="class">.py</span></span><br><span class="line">    ├── kerneldetection<span class="class">.py</span></span><br><span class="line">    └── PackageKit<span class="class">.py</span></span><br><span class="line"></span><br><span class="line"><span class="number">16</span> directories, <span class="number">70</span> files</span><br></pre></td></tr></table></figure>
<p>觀看README</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat ubuntu-drivers-common-<span class="number">0.2</span><span class="number">.91</span><span class="number">.7</span>/README</span><br></pre></td></tr></table></figure>
<p>顯示</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line">ubuntu-drivers-common</span><br><span class="line">=====================</span><br><span class="line"></span><br><span class="line">This <span class="keyword">package</span> aggregates <span class="keyword">and</span> abstracts Ubuntu specific logic <span class="keyword">and</span> knowledge</span><br><span class="line">about third-party driver packages, <span class="keyword">and</span> provides APIs <span class="keyword">for</span> installers <span class="keyword">and</span> driver</span><br><span class="line"><span class="keyword">configuration</span> GUIs. It also contains some NVidia specific support code <span class="keyword">to</span> find</span><br><span class="line">the most appropriate driver version (as we usually ship several), as well as</span><br><span class="line">setting up the alternatives symlinks that the proprietary NVidia <span class="keyword">and</span> FGLRX</span><br><span class="line">packages <span class="keyword">use</span>.</span><br><span class="line"></span><br><span class="line">Command line interface</span><br><span class="line"><span class="comment">----------------------</span></span><br><span class="line">The simplest frontend <span class="keyword">is</span> the <span class="string">"ubuntu-drivers"</span> command line tool. You can <span class="keyword">use</span></span><br><span class="line">it <span class="keyword">to</span> show the available driver packages which apply <span class="keyword">to</span> the current system</span><br><span class="line">(ubuntu-drivers list), <span class="keyword">or</span> <span class="keyword">to</span> install <span class="keyword">all</span> drivers which are appropriate <span class="keyword">for</span></span><br><span class="line">automatic installation (sudo ubuntu-drivers autoinstall), which <span class="keyword">is</span> mostly</span><br><span class="line">useful <span class="keyword">for</span> integration into installers.</span><br><span class="line"></span><br><span class="line">Please see <span class="string">"ubuntu-drivers --help"</span> <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python API</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line">The UbuntuDrivers.detect Python module provides some functions <span class="keyword">to</span> detect the</span><br><span class="line">system<span class="attribute">'s</span> hardware, matching driver packages, <span class="keyword">and</span> packages which are eligible</span><br><span class="line"><span class="keyword">for</span> automatic installation.</span><br><span class="line"></span><br><span class="line">The three main functions are:</span><br><span class="line"></span><br><span class="line">  <span class="string">"Which driver packages apply to this system?"</span></span><br><span class="line"></span><br><span class="line">  packages = UbuntuDrivers.detect.system_driver_packages()</span><br><span class="line"></span><br><span class="line">  <span class="string">"Which devices need drivers, and which packages do they need?"</span></span><br><span class="line"></span><br><span class="line">  driver_info = UbuntuDrivers.detect.system_device_drivers()</span><br><span class="line"></span><br><span class="line">  <span class="string">"Which driver package(s) applies to this piece of hardware?"</span></span><br><span class="line"></span><br><span class="line">  import apt</span><br><span class="line">  apt_cache = apt.Cache</span><br><span class="line">  apt_packages = UbuntuDrivers.detect.packages_for_modalias(apt_cache, modalias)</span><br><span class="line"></span><br><span class="line">These functions only <span class="keyword">use</span> python-apt. They do <span class="keyword">not</span> need any other dependencies,</span><br><span class="line">root privileges, D-<span class="keyword">BUS</span> calls, etc.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PackageKit API</span><br><span class="line"><span class="comment">--------------</span></span><br><span class="line"><span class="keyword">If</span> you want <span class="keyword">to</span> integrate driver lookups <span class="keyword">in</span> software which should <span class="keyword">not</span> be</span><br><span class="line">distribution specific, <span class="keyword">or</span> <span class="keyword">is</span> <span class="keyword">not</span> written <span class="keyword">in</span> Python, you should <span class="keyword">use</span> the</span><br><span class="line">PackageKit API instead <span class="keyword">of</span> the UbuntuDrivers.detect Python module. <span class="keyword">In</span></span><br><span class="line">particular, ubuntu-drivers-common ships PackageKit plugins <span class="keyword">for</span> the</span><br><span class="line"><span class="string">"WhatProvides"</span> PackageKit query <span class="keyword">for</span> the types <span class="string">"MODALIAS"</span> (corresponding <span class="keyword">to</span></span><br><span class="line">UbuntuDrivers.detect.packages_for_modalias()), <span class="keyword">and</span> <span class="string">"HARDWARE_DRIVER"</span></span><br><span class="line">(corresponding <span class="keyword">to</span> UbuntuDrivers.detect.system_driver_packages()).</span><br><span class="line">This also works <span class="keyword">with</span> aptdaemon<span class="attribute">'s</span> PackageKit compatibility layer</span><br><span class="line">(python-aptdaemon.pkcompat), which <span class="keyword">is</span> the preferred PackageKit API</span><br><span class="line">implementation <span class="keyword">in</span> Ubuntu.</span><br><span class="line"></span><br><span class="line">Please see</span><br><span class="line"></span><br><span class="line"> http://www.packagekit.org/gtk-doc/PackageKit-pk-client-sync.html#pk-client-what-provides</span><br><span class="line"></span><br><span class="line">about the WhatProvides() API, <span class="keyword">and</span></span><br><span class="line"></span><br><span class="line"> https://gitorious.org/packagekit/packagekit/blobs/master/docs/provides-<span class="keyword">component</span>-naming.txt</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> details about the various WhatProvides types.</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line"></span><br><span class="line">From Python:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; from gi.repository import PackageKitGlib</span><br><span class="line">&gt;&gt;&gt; pk = PackageKitGlib.Client()</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; res = pk.what_provides(PackageKitGlib.FilterEnum.NONE, PackageKitGlib.ProvidesEnum.MODALIAS, [<span class="string">"pci:v000010DEd000007E3sv00sd00bc03sc00i00"</span>], None, lambda p, t, d: True, None)</span><br><span class="line">&gt;&gt;&gt; res.get_exit_code()</span><br><span class="line">&lt;enum PK_EXIT_ENUM_SUCCESS <span class="keyword">of</span> <span class="keyword">type</span> PkExitEnum&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="keyword">for</span> p <span class="keyword">in</span> res.get_package_array(): print p.get_id()</span><br><span class="line">nvidia-current;<span class="number">295.53</span>-<span class="number">0</span>ubuntu1;amd64;Ubuntu</span><br><span class="line">nvidia-current-updates;<span class="number">295.53</span>-<span class="number">0</span>ubuntu1;amd64;Ubuntu</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; res = pk.what_provides(PackageKitGlib.FilterEnum.NONE, PackageKitGlib.ProvidesEnum.HARDWARE_DRIVER, [<span class="string">"drivers_for_attached_hardware"</span>], None, lambda p, t, d: True, None)</span><br><span class="line">&gt;&gt;&gt; res.get_exit_code()</span><br><span class="line">&lt;enum PK_EXIT_ENUM_SUCCESS <span class="keyword">of</span> <span class="keyword">type</span> PkExitEnum&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="keyword">for</span> p <span class="keyword">in</span> res.get_package_array(): print p.get_id()</span><br><span class="line"><span class="keyword">open</span>-vm-dkms;<span class="number">2011.12</span>.<span class="number">20</span>-<span class="number">562307</span>-<span class="number">0</span>ubuntu1;<span class="keyword">all</span>;Ubuntu</span><br><span class="line"></span><br><span class="line">Using the pkcon command line tool:</span><br><span class="line"></span><br><span class="line"> $ pkcon what-provides <span class="string">"pci:v000010DEd000007E3sv00sd00bc03sc00i00"</span></span><br><span class="line"> Available     nvidia-current-<span class="number">295.49</span>-<span class="number">0</span>ubuntu1.amd64        NVIDIA binary Xorg driver, kernel module <span class="keyword">and</span> VDPAU <span class="keyword">library</span></span><br><span class="line"> Available     nvidia-current-updates-<span class="number">295.49</span>-<span class="number">0</span>ubuntu1.amd64    NVIDIA binary Xorg driver, kernel module <span class="keyword">and</span> VDPAU <span class="keyword">library</span></span><br><span class="line"></span><br><span class="line"> $ pkcon what-provides <span class="string">"drivers_for_attached_hardware"</span></span><br><span class="line"> Available      <span class="keyword">open</span>-vm-dkms-<span class="number">2011.12</span>.<span class="number">20</span>-<span class="number">562307</span>-<span class="number">0</span>ubuntu1.<span class="keyword">all</span>     Source <span class="keyword">for</span> VMware guest systems driver (DKMS)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Detection logic</span><br><span class="line"><span class="comment">---------------</span></span><br><span class="line">The principal method <span class="keyword">of</span> mapping hardware <span class="keyword">to</span> driver packages <span class="keyword">is</span> <span class="keyword">to</span> <span class="keyword">use</span> modalias</span><br><span class="line">patterns. Hardware devices export a <span class="string">"modalias"</span> sysfs <span class="keyword">attribute</span>, <span class="keyword">for</span> example</span><br><span class="line"></span><br><span class="line">  $ cat /sys/devices/pci0000:<span class="number">00</span>/<span class="number">0000</span>:<span class="number">00</span>:<span class="number">1</span>b.<span class="number">0</span>/modalias</span><br><span class="line">  pci:v00008086d00003B56sv000017AAsd0000215Ebc04sc03i00</span><br><span class="line"></span><br><span class="line">Kernel modules declare which hardware they can handle <span class="keyword">with</span> modalias patterns</span><br><span class="line">(globs), e. g.:</span><br><span class="line"></span><br><span class="line">  $ modinfo snd_hda_intel</span><br><span class="line">  [...]</span><br><span class="line">  <span class="keyword">alias</span>:          pci:v00008086d*sv*sd*bc04sc03i00*</span><br><span class="line"></span><br><span class="line">Driver packages which are <span class="keyword">not</span> installed by <span class="keyword">default</span> (e. g. backports <span class="keyword">of</span> drivers</span><br><span class="line">from newer Linux packages, <span class="keyword">or</span> the proprietary NVidia driver <span class="keyword">package</span></span><br><span class="line"><span class="string">"nvidia-current"</span>) have a <span class="string">"Modaliases:"</span> <span class="keyword">package</span> header which includes <span class="keyword">all</span></span><br><span class="line">modalias patterns from <span class="keyword">all</span> kernel modules that they ship. It <span class="keyword">is</span> recommended <span class="keyword">to</span></span><br><span class="line">add these headers <span class="keyword">to</span> the <span class="keyword">package</span> <span class="keyword">with</span> dh_modaliases(<span class="number">1</span>).</span><br><span class="line"></span><br><span class="line">ubuntu-drivers-common uses these <span class="keyword">package</span> headers <span class="keyword">to</span> <span class="keyword">map</span> a particular piece <span class="keyword">of</span></span><br><span class="line">hardware (identified by a modalias) <span class="keyword">to</span> the driver packages which <span class="keyword">cover</span> that</span><br><span class="line">hardware.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Custom detection plugins</span><br><span class="line"><span class="comment">------------------------</span></span><br><span class="line"><span class="keyword">For</span> some kinds <span class="keyword">of</span> drivers the modalias detection approach does <span class="keyword">not</span> work. <span class="keyword">For</span></span><br><span class="line">example, the <span class="string">"sl-modem-daemon"</span> driver requires some checks <span class="keyword">in</span></span><br><span class="line">/proc/asound/cards <span class="keyword">and</span> <span class="string">"aplay -l"</span> <span class="keyword">to</span> decide whether <span class="keyword">or</span> <span class="keyword">not</span> it applies <span class="keyword">to</span> the</span><br><span class="line">system. These special cases can be put into a <span class="string">"detection plugin"</span>, by adding a</span><br><span class="line">small piece <span class="keyword">of</span> Python code <span class="keyword">to</span> /usr/share/ubuntu-drivers-common/detect/NAME.py</span><br><span class="line">(shipped <span class="keyword">in</span> ./detect-plugins/ <span class="keyword">in</span> the ubuntu-drivers-common source). They need</span><br><span class="line"><span class="keyword">to</span> export a method</span><br><span class="line"></span><br><span class="line">   def detect(apt_cache):</span><br><span class="line">      # do detection logic here</span><br><span class="line">      <span class="keyword">return</span> [<span class="attribute">'driver_package</span>', ...]</span><br><span class="line"></span><br><span class="line">which can do any kind <span class="keyword">of</span> detection <span class="keyword">and</span> <span class="keyword">then</span> <span class="keyword">return</span> the resulting set <span class="keyword">of</span></span><br><span class="line">packages that apply <span class="keyword">to</span> the current system. Please note that this cannot rely <span class="keyword">on</span></span><br><span class="line">having root privileges.</span><br></pre></td></tr></table></figure>
<h2 id="探索「Package」-「ubuntu-drivers-common」">探索「Package」-「ubuntu-drivers-common」</h2><p>下載套件「<a href="http://packages.ubuntu.com/trusty/ubuntu-drivers-common" target="_blank" rel="external">ubuntu-drivers-common</a>」，並解開</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Downloads/ubuntu-drivers-common/download</span><br><span class="line">apt-get download ubuntu-drivers-common</span><br><span class="line">dpkg -x ubuntu-drivers-common_1%<span class="number">3</span>a0<span class="number">.2</span><span class="number">.91</span><span class="number">.7</span>_amd64.deb ubuntu-drivers-common</span><br><span class="line">dpkg -e dpkg -e ubuntu-drivers-common_1%<span class="number">3</span>a0<span class="number">.2</span><span class="number">.91</span><span class="number">.7</span>_amd64.deb</span><br></pre></td></tr></table></figure>
<p>觀看有哪些檔案</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tree ubuntu-drivers-<span class="preprocessor">common</span></span><br></pre></td></tr></table></figure>
<p>顯示</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">ubuntu-drivers-common</span><br><span class="line">├── etc</span><br><span class="line">│   └── init</span><br><span class="line">│       └── gpu-manager<span class="class">.conf</span></span><br><span class="line">├── usr</span><br><span class="line">│   ├── bin</span><br><span class="line">│   │   ├── gpu-manager</span><br><span class="line">│   │   ├── nvidia-detector</span><br><span class="line">│   │   ├── quirks-handler</span><br><span class="line">│   │   └── ubuntu-drivers</span><br><span class="line">│   ├── lib</span><br><span class="line">│   │   ├── nvidia</span><br><span class="line">│   │   │   └── pre-install</span><br><span class="line">│   │   ├── python3</span><br><span class="line">│   │   │   └── dist-packages</span><br><span class="line">│   │   │       ├── NvidiaDetector</span><br><span class="line">│   │   │       │   ├── alternatives<span class="class">.py</span></span><br><span class="line">│   │   │       │   ├── __init__<span class="class">.py</span></span><br><span class="line">│   │   │       │   └── nvidiadetector<span class="class">.py</span></span><br><span class="line">│   │   │       ├── Quirks</span><br><span class="line">│   │   │       │   ├── __init__<span class="class">.py</span></span><br><span class="line">│   │   │       │   ├── quirkapplier<span class="class">.py</span></span><br><span class="line">│   │   │       │   ├── quirkinfo<span class="class">.py</span></span><br><span class="line">│   │   │       │   └── quirkreader<span class="class">.py</span></span><br><span class="line">│   │   │       ├── UbuntuDrivers</span><br><span class="line">│   │   │       │   ├── detect<span class="class">.py</span></span><br><span class="line">│   │   │       │   ├── __init__<span class="class">.py</span></span><br><span class="line">│   │   │       │   ├── kerneldetection<span class="class">.py</span></span><br><span class="line">│   │   │       │   └── PackageKit<span class="class">.py</span></span><br><span class="line">│   │   │       └── ubuntu_drivers_common-<span class="number">0.0</span>.<span class="number">0</span><span class="class">.egg-info</span></span><br><span class="line">│   │   │           ├── dependency_links<span class="class">.txt</span></span><br><span class="line">│   │   │           ├── entry_points<span class="class">.txt</span></span><br><span class="line">│   │   │           ├── PKG-INFO</span><br><span class="line">│   │   │           └── top_level<span class="class">.txt</span></span><br><span class="line">│   │   └── ubiquity</span><br><span class="line">│   │       └── target-config</span><br><span class="line">│   │           └── <span class="number">31</span>ubuntu_driver_packages</span><br><span class="line">│   └── share</span><br><span class="line">│       ├── apport</span><br><span class="line">│       │   └── package-hooks</span><br><span class="line">│       │       └── ubuntu-drivers-common<span class="class">.py</span></span><br><span class="line">│       ├── doc</span><br><span class="line">│       │   └── ubuntu-drivers-common</span><br><span class="line">│       │       ├── changelog<span class="class">.gz</span></span><br><span class="line">│       │       ├── copyright</span><br><span class="line">│       │       └── README<span class="class">.gz</span></span><br><span class="line">│       ├── python3</span><br><span class="line">│       │   └── runtime<span class="class">.d</span></span><br><span class="line">│       │       └── ubuntu-drivers-common<span class="class">.rtupdate</span></span><br><span class="line">│       └── ubuntu-drivers-common</span><br><span class="line">│           ├── detect</span><br><span class="line">│           │   ├── arm-gles<span class="class">.py</span></span><br><span class="line">│           │   ├── open-vm-dkms<span class="class">.py</span></span><br><span class="line">│           │   └── sl-modem<span class="class">.py</span></span><br><span class="line">│           ├── fake-devices-wrapper</span><br><span class="line">│           ├── obsolete</span><br><span class="line">│           └── quirks</span><br><span class="line">│               ├── dell_latitude</span><br><span class="line">│               ├── lenovo_thinkpad</span><br><span class="line">│               └── put_your_quirks_here</span><br><span class="line">└── <span class="tag">var</span></span><br><span class="line">    └── lib</span><br><span class="line">        └── ubuntu-drivers-common</span><br><span class="line"></span><br><span class="line"><span class="number">27</span> directories, <span class="number">35</span> files</span><br></pre></td></tr></table></figure>

				</div>

				

					<div class="content-tag">

						 <a class="tag-link" href="/blog/find/tag/basic-skill/">basic-skill</a>, <a class="tag-link" href="/blog/find/tag/基本功/">基本功</a>

					</div>

				

			</article>

			<div class="content-nav">

				
					<a href="/blog/read/linux/ubuntu/driver/software-properties-gtk/" title="Ubuntu環境下，如何使用下指令的方式啟動「額外驅動程式」視窗">&larr; Prev</a>
				

				
					<a href="/blog/read/platform/gitbook/editor/" title="Ubuntu環境下，安裝gitbook-editor">Next &rarr;</a>
				

			</div>

		</div>


	</div>

	
	<footer class="site-footer">

		<div class="row">

			<p class="cr">&copy; 2016 samwhelp </p>

			<p class="theme">Powered: <a href="http://hexo.io/"  target="_blank">Hexo</a></p>

		</div>

	</footer>

	

<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-55644249-1', 'auto');
	ga('send', 'pageview');
</script>




</body>
</html>
